\chapter{基本信息}

\section{开始使用}

你可以到Berry项目的GitHub页面（\url{https://github.com/gztss/berry}）上获取Berry解释器的源代码。然后你需要编译Berry解释器，这些信息你可以到项目的README.md文档中查看。

在得到Berry解释器的可执行文件后（在Windows中文件名是``berry.exe''，在Linux和macOS中文件名是``berry''），你可以直接运行解释器\footnote{在Windows中你可以直接双击运行可执行文件，在Linux或者macOS中通常要使用``终端''（Terminal）来运行。你也可以在Windows的``命令提示符''（cmd）窗口中运行解释器。具体的使用方法请参考README.md文档。}并开始使用交互模式运行代码。

作为惯例，我们使用``Hello World''程序来入门。为了最快地达到目的，我们直接运行解释器，这时我们进入一个叫做``交互模式''（REPL）的界面，我们将看到如下信息：
\begin{lstlisting}[language=berry, numbers=none]
Berry 0.0.4 (build in Feb  1 2019, 13:14:04)
[GCC 8.1.0] on Windows (default)
>
\end{lstlisting}

这段文字中，前两行显示了Berry解释器的版本、编译时间、编译器和操作系统等信息，第三行的符号``\texttt{>}''叫做提示符，此时光标显示在提示符后面，我们可以直接在此处输入代码并在按下``Enter''键之后运行。为了完成我们的``Hello World''程序，在交互模式中输入\texttt{print('Hello World')}并执行，此时运行结果如下：
\begin{lstlisting}[language=berry, numbers=none]
Berry 0.0.4 (build in Feb  1 2019, 13:14:04)
[GCC 8.1.0] on Windows (default)
> print('Hello World')
Hello World
>
\end{lstlisting}

运行这行代码后解释器输出了一行``\texttt{Hello World}''文本。这行代码通过调用\texttt{print()}函数来实现对字符串\texttt{'Hello World'}输出的输出。在交互模式中，解释器会显示表达式的值（如果值不是\texttt{nil}的话），例如我们输入表达式\texttt{1 + 2}将会输出计算结果\texttt{3}：
\begin{lstlisting}[language=berry, numbers=none]
> 1 + 2
3
\end{lstlisting}
因此交互模式下最简单的``Hello World''程序是直接输入字符串\texttt{'Hello World'}并运行：
\begin{lstlisting}[language=berry, numbers=none]
> 'Hello World'
Hello World
\end{lstlisting}

你可以把Berry解释器的交互模式当成一个科学计算器来使用，不过，一些数学函数不能直接使用，而要先使用\texttt{import math}语句来导入数学库，然后在使用数学库中的函数时要使用``\texttt{math.}''作为前缀，例如\texttt{sin}函数要写成\texttt{math.sin}：
\begin{lstlisting}[language=berry, numbers=none]
> import math
> math.pi
3.14159
> math.sin(math.pi / 2)
1
> math.sqrt(2)
1.41421
\end{lstlisting}

\section{词法}

在介绍Berry的语法之前，我们先来看一段简单的代码（你可以在交互模式种运行这段代码）：
\begin{lstlisting}[language=berry]
def func(x) # a function example
    return x + 1.5
end
print('func(10) =', func(10))
\end{lstlisting}

这段代码中定义了一个函数\texttt{func}并在后面调用了它。在了解这段代码怎样工作之前，我们先介绍Berry语言的语法元素。

以上代码中，语法元素的具体分类为：\texttt{def}、\texttt{return}和\texttt{end}是Berry语言的关键字；而第1行中的``\texttt{\# a function example}''被称为注释；\texttt{print}、\texttt{func}和\texttt{x}是一些标识符，它们通常用于表示一个变量；\texttt{1.5}和\texttt{10}这些数字被称为数值字面量，它们相当于日常生活中使用的数字；\texttt{'func(10) ='}是一个字符串字面量，他们大量用于需要表示文本的地方；\texttt{+}是一个加法运算符，这里使用加法运算符可以将变量\texttt{x}和数值\texttt{1.5}相加。

以上的分类实际上是从词法分析器的角度来做的。词法分析是Berry源代码解析的第一步，为了写出正确的源代码，我们先从最基础的词法开始介绍。

\subsection{注释}

注释是不会生成任何代码的一些文本，它们用于在源代码中做批注并给人们阅读，而编译器则不会解释它们的内容。Berry支持单行注释和跨行的块注释。单行注释从字符``\texttt{\#}'开始，直到换行字符结束。快注释从文本``\texttt{\#-}''开始，直到文本``\texttt{-\#}''结束。以下是使用注释的例子：
\begin{lstlisting}[language=berry, numbers=none]
# this is a line comment
#- this is a
   block comment
-#
\end{lstlisting}

和C语言类似，快注释不支持嵌套，以下代码将在第一个``\texttt{-\#}''文本处终止对注释的解析：
\begin{lstlisting}[language=berry, numbers=none]
#- some comments -# ... -#
\end{lstlisting}

\subsection{字面值}

字面值是编程时在源代码中直接写出的固定值。Berry的字面量有整数、实数、布尔量、字符串和nil。例如，数值\texttt{34}是一个整数字面值。

\subsubsection{数值字面值}

数值字面值包括\textbf{整数}（Integer）字面值和\textbf{实数}（Real）字面值。
\begin{lstlisting}[language=berry, numbers=none]
40      # integer
0x80    # hexadecimal literal (integer)
3.14    # real
1.1e-6  # real
\end{lstlisting}

数值字面值的写法和日常写法类似。Berry支持16进制的整数字面值，16进制字面值使用前缀\texttt{0x}或者\texttt{0X}开头，后面是一个16进制数。

\subsubsection{布尔字面值}

布尔值（Boolean）用来表示逻辑状态中的真和假。你可以使用\texttt{true}和\texttt{false}这两个关键字来表示布尔字面值。

\subsubsection{字符串字面值}

字符串（String）是一段文本，它的字面值写法是使用一对\texttt{'}或\texttt{"}包围字符串文本：
\begin{lstlisting}[language=berry, numbers=none]
'this is a string'
"this is a string"
\end{lstlisting}

\subsubsection{Nil字面值}

Nil表示空值，其字面值使用关键字\texttt{nil}来表示。

\subsection{标识符}

标识符(Identifier)是由用户定义的名字，它由下划线或者字母作为开头，再由若干个下划线、字母或者数字的组合构成。和大多数语言类似，Berry是大小写敏感的，因此标识符\texttt{A}和标识符\texttt{a}会解析为两种标识符。
\begin{lstlisting}[language=berry, numbers=none]
a
TestVariable
Test_Var
_init
baseCass
_
\end{lstlisting}

\subsection{关键字}

Berry保留以下记号作为语言的关键字：
\begin{lstlisting}[language=berry, numbers=none]
    if          elif        else        while       for         def
    end         class       break       continue    return      true
    false       nil         var         do          import      as
\end{lstlisting}

关键字的具体使用方法会在相关的章节中介绍。注意，不能将关键字作为标识符使用，由于Berry是大小写敏感的，因此\texttt{If}可以用于标识符。
